#Design principles of modern symmetric block ciphers

* Mainly based on the ideas of Shannon (1945) and developed by Fiestel (1973)
* Hiding relation between ciphertext and the key


#Confusion and diffusion

##Definitions
__Confusion__: Hiding the relation between ciphertext and key
__Diffusion__: Spreading information. Small changes in cipher text should produce large changes in ciphertext

##Overview
* Usuaully achieved by a combination of _substitutions_ and _permutations_
* Substitutions ( S-BOX ) act on smaller groups of bits
* Permutations act over the whole block

###How it is achieved
* Is achieved by running several rounds, e.g. substitutions, permutations and XORing
* Bit block lengths can be up to 64-254 bits

#DES ( Data encryption standard )
* A symmetric key system
* Very fast
* Advances in comuting power made it vulnerable to exhaustive key search
* Was replaced by a new standard AES ( Advanced encryption standard )

##Cryptanalysis of DES
* Exhaustive key search succeded to crack DES in recent years
* Several DES cracking challenges resulted in brute force breaking of DES

##How to make DES stronger
* Triple DES
	* Encrypt using one key
	* Decrypt with another second key
	* Encrypt again using the first key (or a third)

#AES ( Advanced encryption standard )
* Consists of several rounds, each consisting of a combination of substitutions, permutations and XOR-ing with the round key
* All bits are treated equally and each round acts on all 
* Plain text is organised in a 4 x 4 array of bytes, called the state
* Successive bytes are written in column wise arrays

##Rounds of encryption
* __Byte sub__ ( An SBOX ) is applied to each byte
* __ShiftRow__: Each row is cyclically shifted left by the offsets 0, 1, 2, 3 bytes
* __MixColumn__: Each column of bytes is transformed by a finite field operation ( can be viewed as a substitution acting on each column )
* __AddRoundKey__: The round key, written column wise is XOR'ed to the current block

##Rounds
* There is an XOR with a round key before the first round
* The last round skips the mixcolumns step

##RoundKey generation
Is done by expanding the original key

* Round keys are generated by expanding the original key
* Starts with the original key
* Geneartes 1 more 4 byte at a time
* Each word is an xor between the preceeding word and the word 4 positions back
* For every 4th word, another method is applied (Involves rotation of the word, and xor with a predefined value and substitution using S-BOX)
* Expanded key is split into round keys of the required size

##Decryption
* All operations in the decryption rounds are reversed
* The resulting decryption algorithm is similar, but not identical to encryption

##Symmetric cryptosystem examples
* Triple DES
* IDEA
* Serpent
* Blowfith (Twofish)
* RC2 & RC5
* CAST

##Modes of operation

###ECB ( Electronic codebook )
* Each block is encoded independently using the same key
* Used for short messages (e.g key transmission)
* Vulnerable if used for long  messages
	* Repeated blocks of plaintext will cause repeated blocks of ciphertext

###CBC ( Cipher block chaining )
* The first block is XOR-ed with an initialisation vector and then encrypted
* The vector can be made public or kept secret ... it's usually random and changed on each use of CBC

###OFB (Output feedback) 
* Keystream is produced by repeatedly encrypting the initialisation vector using the same key. Each encryption produces one more block of bits in the keystream

## CFB ( Cipher feedback ) 
* Initialisation vector is encrypted producing the first block of the keystream. This is XORed with the first block of plaintext to obtain the first block of ciphertext. Each block of ciphertext is encrypted using the same key K to obtain the next block of the keystream. 

## CTR ( Counter )
* The keystream is produced by encrypting an initial coutner value, then adding one to each counter value. 
* A new random counter value should be used each time the coutner mode is used